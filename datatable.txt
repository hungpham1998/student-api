START TRANSACTION;
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

CREATE DATABASE IF NOT EXISTS `student` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
USE student;

DROP TABLE IF EXISTS `accounts`;
CREATE TABLE `accounts` (
  `Id` bigint(20) NOT NULL,
  `UserName` varchar(250) DEFAULT NULL,
  `Account` varchar(250) DEFAULT NULL,
  `PassWord` varchar(250) DEFAULT NULL,
  `Image` varchar(250) DEFAULT NULL,
  `Department_Id` bigint(20) DEFAULT NULL,
  `Position_Id` bigint(20) DEFAULT NULL,
  `Mail` varchar(250) DEFAULT NULL,
  `Address` varchar(250) DEFAULT NULL
) ;

DROP TABLE IF EXISTS `accountroles`;
CREATE TABLE `accountroles` (
  `Id_Acount` bigint(20) DEFAULT NULL,
  `Id_Role` bigint(20) DEFAULT NULL,
  `Id` bigint(20) NOT NULL
) ;

DROP TABLE IF EXISTS `depratments`;
CREATE TABLE `depratments` (
  `Id` bigint(20) NOT NULL,
  `IdPrarent` bigint(20) DEFAULT NULL,
  `Title` varchar(250) DEFAULT NULL,
  `Note` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `learnclasses`;
CREATE TABLE `learnclasses` (
  `Id` bigint(20) NOT NULL,
  `Title` varchar(250) DEFAULT NULL,
  `Code` varchar(250) DEFAULT NULL,
  `Specialize_Id` bigint(20) DEFAULT NULL,
  `Note` varchar(250) NOT NULL
) ;


DROP TABLE IF EXISTS `learnschedules`;
CREATE TABLE `learnschedules` (
  `Id` bigint(20) NOT NULL,
  `NumberPeriods` int(11) DEFAULT NULL,
  `Account_Id` bigint(20) DEFAULT NULL,
  `Class_Id` bigint(20) DEFAULT NULL,
  `Subject_Id` bigint(20) DEFAULT NULL,
  `ClassRoom` varchar(250) DEFAULT NULL,
  `StartTime` datetime DEFAULT NULL,
  `DuaDate` datetime DEFAULT NULL,
  `Student_Id` bigint(20) NOT NULL,
  `Year_Id` bigint(20) NOT NULL,
  `Title` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `learnyears`;
CREATE TABLE `learnyears` (
  `Id` bigint(20) NOT NULL,
  `LearnYear` varchar(250) DEFAULT NULL,
  `Note` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `pointpractices`;
CREATE TABLE `pointpractices` (
  `Id` bigint(20) NOT NULL,
  `Student_Id` bigint(20) DEFAULT NULL,
  `Year_Id` bigint(20) DEFAULT NULL,
  `practise` varchar(1) DEFAULT NULL,
  `Note` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `pointstudents`;
CREATE TABLE `pointstudents` (
  `Id` bigint(20) NOT NULL,
  `Student_Id` bigint(20) DEFAULT NULL,
  `Subject_Id` bigint(20) DEFAULT NULL,
  `PointCC` int(11) DEFAULT NULL,
  `PointKT1` int(11) DEFAULT NULL,
  `PointKT2` int(11) DEFAULT NULL,
  `PointGk` int(11) DEFAULT NULL,
  `PointT` int(11) DEFAULT NULL
) ;

DROP TABLE IF EXISTS `positions`;
CREATE TABLE `positions` (
  `Id` bigint(20) NOT NULL,
  `Title` varchar(250) DEFAULT NULL,
  `Note` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `roles`;
CREATE TABLE `roles` (
  `Id` bigint(20) NOT NULL,
  `Title` varchar(250) DEFAULT NULL,
  `Note` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `specializes`;
CREATE TABLE `specializes` (
  `Id` bigint(20) NOT NULL,
  `Title` varchar(250) DEFAULT NULL,
  `Code` varchar(250) DEFAULT NULL,
  `Note` longtext DEFAULT NULL
) ;


DROP TABLE IF EXISTS `students`;
CREATE TABLE `students` (
  `Id` bigint(20) NOT NULL,
  `Last_Name` varchar(250) DEFAULT NULL,
  `Frist_Name` varchar(250) DEFAULT NULL,
  `Image` varchar(250) DEFAULT NULL,
  `Code` varchar(250) NOT NULL,
  `createdAt` datetime NOT NULL,
  `updatedAt` datetime NOT NULL,
  `Adress` varchar(250) NOT NULL,
  `Brithday` datetime NOT NULL,
  `Note` varchar(250) NOT NULL
) ;

DROP TABLE IF EXISTS `subjects`;
CREATE TABLE `subjects` (
  `Id` bigint(20) NOT NULL,
  `Code` varchar(250) DEFAULT NULL,
  `Title` varchar(250) DEFAULT NULL,
  `CreditNumber` int(11) DEFAULT NULL,
  `Note` longtext DEFAULT NULL
) ;


ALTER TABLE `accounts`
  ADD PRIMARY KEY (`Id`),
  ADD KEY `Department_Id` (`Department_Id`),
  ADD KEY `Position_Id` (`Position_Id`);

ALTER TABLE `accountroles`
  ADD PRIMARY KEY (`Id`),
  ADD KEY `Id_Acount` (`Id_Acount`),
  ADD KEY `Id_Role` (`Id_Role`);

ALTER TABLE `depratments`
  ADD PRIMARY KEY (`Id`);

ALTER TABLE `learnclasses`
  ADD PRIMARY KEY (`Id`),
  ADD KEY `Specialize_Id` (`Specialize_Id`);

ALTER TABLE `learnschedules`
  ADD PRIMARY KEY (`Id`),
  ADD KEY `Account_Id` (`Account_Id`),
  ADD KEY `Class_Id` (`Class_Id`),
  ADD KEY `Subject_Id` (`Subject_Id`),
  ADD KEY `Student_Id` (`Student_Id`);

ALTER TABLE `learnyears`
  ADD PRIMARY KEY (`Id`);

ALTER TABLE `pointpractices`
  ADD PRIMARY KEY (`Id`),
  ADD KEY `Student_Id` (`Student_Id`),
  ADD KEY `Year_Id` (`Year_Id`);

ALTER TABLE `pointstudents`
  ADD PRIMARY KEY (`Id`),
  ADD KEY `Student_Id` (`Student_Id`),
  ADD KEY `Subject_Id` (`Subject_Id`);

ALTER TABLE `positions`
  ADD PRIMARY KEY (`Id`);

ALTER TABLE `roles`
  ADD PRIMARY KEY (`Id`);

ALTER TABLE `specializes`
  ADD PRIMARY KEY (`Id`);

ALTER TABLE `students`
  ADD PRIMARY KEY (`Id`);

ALTER TABLE `subjects`
  ADD PRIMARY KEY (`Id`);


ALTER TABLE `accounts`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `depratments`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `learnclasses`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `learnschedules`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `learnyear`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `pointpractices`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `pointstudents`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `positions`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `roles`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `specializes`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `students`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;

ALTER TABLE `subjects`
  MODIFY `Id` bigint(20) NOT NULL AUTO_INCREMENT;


ALTER TABLE `accounts`
  ADD CONSTRAINT `account_ibfk_1` FOREIGN KEY (`Department_Id`) REFERENCES `depratments` (`Id`),
  ADD CONSTRAINT `account_ibfk_2` FOREIGN KEY (`Position_Id`) REFERENCES `positions` (`Id`);

ALTER TABLE `accountroles`
  ADD CONSTRAINT `accountrole_ibfk_1` FOREIGN KEY (`Id_Acount`) REFERENCES `accounts` (`Id`),
  ADD CONSTRAINT `accountrole_ibfk_2` FOREIGN KEY (`Id_Role`) REFERENCES `roles` (`Id`);

ALTER TABLE `learnclasses`
  ADD CONSTRAINT `learnclasses_ibfk_1` FOREIGN KEY (`Specialize_Id`) REFERENCES `specializes` (`Id`);

ALTER TABLE `learnschedules`
  ADD CONSTRAINT `learnschedule_ibfk_1` FOREIGN KEY (`Account_Id`) REFERENCES `accounts` (`Id`),
  ADD CONSTRAINT `learnschedule_ibfk_2` FOREIGN KEY (`Class_Id`) REFERENCES `learnclasses` (`Id`),
  ADD CONSTRAINT `learnschedule_ibfk_3` FOREIGN KEY (`Subject_Id`) REFERENCES `subjects` (`Id`),
  ADD CONSTRAINT `learnschedule_ibfk_4` FOREIGN KEY (`Student_Id`) REFERENCES `students` (`Id`);
   ADD CONSTRAINT `learnschedule_ibfk_5` FOREIGN KEY (`Year_Id`) REFERENCES `learnclasses` (`Id`);

ALTER TABLE `pointpractices`
  ADD CONSTRAINT `pointpractice_ibfk_1` FOREIGN KEY (`Student_Id`) REFERENCES `students` (`Id`),
  ADD CONSTRAINT `pointpractice_ibfk_2` FOREIGN KEY (`Year_Id`) REFERENCES `learnyears` (`Id`);

ALTER TABLE `pointstudents`
  ADD CONSTRAINT `pointstudent_ibfk_1` FOREIGN KEY (`Student_Id`) REFERENCES `students` (`Id`),
  ADD CONSTRAINT `pointstudent_ibfk_2` FOREIGN KEY (`Subject_Id`) REFERENCES `subjects` (`Id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
